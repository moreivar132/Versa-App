# Configuración Maestra de Netlify
# Controla el build y las variables de entorno por rama

[build]
  command = "npm run build"
  publish = "dist"

# --- CONTEXTO DE PRODUCCIÓN (Rama main) ---
[context.production]
  environment = { VITE_API_URL = "https://versa-app.up.railway.app" }

# --- CONTEXTO DE DEVELOPMENT (Rama ivan, dev, staging, etc) ---
[context.deploy-preview]
  environment = { VITE_API_URL = "https://versa-app-dev.up.railway.app" }

[context.branch-deploy]
  environment = { VITE_API_URL = "https://versa-app-dev.up.railway.app" }

# Configuración específica para la rama 'dev' o 'ivan' si existen
[context.dev]
  environment = { VITE_API_URL = "https://versa-app-dev.up.railway.app" }

[context.ivan]
  environment = { VITE_API_URL = "https://versa-app-dev.up.railway.app" }

# Fallback de redirecciones (SPA)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
