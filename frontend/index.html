<!DOCTYPE html>
<html class="dark" lang="es">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>VERSA Manager - Software para Talleres y Flotas</title>
  <link rel="icon" type="image/png" href="assets/favicon.png">
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com" rel="preconnect" />
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700;900&amp;display=swap"
    rel="stylesheet" />
  <link
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
    rel="stylesheet" />

  <!-- Leaflet CSS for the Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

  <!-- WhatsApp Widget Styles -->
  <link rel="stylesheet" href="whatsapp-widget.css" />
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
    }

    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }

    /* Custom detail summary marker style */
    details>summary {
      list-style: none;
    }

    details>summary::-webkit-details-marker {
      display: none;
    }

    /* Styles for the new image-based marker */
    .versa-marker-image {
      width: 32px;
      height: 32px;
      display: block;
      position: relative;
      z-index: 2;
      /* Ensure image is above the pulse */
    }

    /* Pulsing effect for the marker, adjusted for a circular icon */
    .marker-pulse {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 68, 0, 0.5);
      border-radius: 50%;
      /* Round pulse for round icon */
      z-index: 1;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
        opacity: 0.8;
      }

      100% {
        transform: scale(1.8);
        opacity: 0;
      }
    }

    /* Animación para el modal */
    @keyframes scale-in {
      0% {
        transform: scale(0.95);
        opacity: 0;
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    .animate-scale-in {
      animation: scale-in 0.2s ease-out forwards;
    }
  </style>
  <script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#ff4400",
            "background-light": "#f8f6f5",
            "background-dark": "#121212",
          },
          fontFamily: {
            "display": ["Montserrat", "sans-serif"]
          },
          borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px" },
        },
      },
    }
  </script>
</head>

<body class="bg-background-dark text-[#E0E0E0] font-display">
  <div class="relative flex min-h-screen w-full flex-col">

    <!-- TopNavBar -->
    <header class="sticky top-0 z-50 bg-background-dark/95 backdrop-blur-sm border-b border-white/10">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex h-20 items-center justify-between">
          <div class="flex items-center gap-4">
            <img src="https://imgur.com/iBrjKwv.png" alt="GOMANAGER Logo" class="h-6 w-auto">
            <h2 class="text-xl font-bold tracking-tight text-white">GOMANAGER</h2>
          </div>
          <nav class="hidden md:flex items-center gap-8 text-sm font-medium text-[#A0A0A0]">
            <a class="transition-colors hover:text-white" href="#funcionalidades">Funcionalidades</a>
            <a class="transition-colors hover:text-white" href="#pricing">Planes</a>
            <a class="transition-colors hover:text-white" href="#faq">FAQ</a>
            <a class="transition-colors hover:text-white" href="#contacto">Contacto</a>
          </nav>
          <div class="flex items-center gap-4">
            <a href="/login.html"
              class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary text-white text-sm font-bold tracking-wide transition-opacity hover:opacity-90">
              <span class="truncate">Ingresar</span>
            </a>
            <button id="mobile-menu-btn" class="md:hidden text-white">
              <span class="material-symbols-outlined text-3xl">menu</span>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Mobile Menu -->
    <div id="mobile-menu"
      class="hidden md:hidden fixed inset-0 z-40 bg-background-dark/95 backdrop-blur-sm pt-24 px-6 transition-all duration-300">
      <nav class="flex flex-col gap-6 text-lg font-medium text-[#A0A0A0]">
        <a class="transition-colors hover:text-white" href="#funcionalidades">Funcionalidades</a>
        <a class="transition-colors hover:text-white" href="#pricing">Planes</a>
        <a class="transition-colors hover:text-white" href="#faq">FAQ</a>
        <a class="transition-colors hover:text-white" href="#contacto">Contacto</a>
      </nav>
    </div>

    <!-- HeroSection -->
    <main class="flex-grow">
      <section class="relative py-20 sm:py-32 lg:py-40">
        <div class="absolute inset-0 z-0">
          <div class="absolute inset-0 bg-background-dark" data-alt="Dark charcoal background"></div>
          <div class="absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20"
            style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDjtT_B4xDuI5S9NhSsuYse4FI_gn1w1VB5yGZAGqRx_JUzjPPkBVNOBKwBNHW_LqJ6ljObkfpvgEYoio59DWDs_WHk57SElgHakR8BiYVLqEDBB8jeH9833TOmHZkcYjGbvZ6caWeo8tBMlU12K8TJKxdchmRpEK6qjD4ULpZmffxudsq13T7i69rWg4-rKN71LT4chyVGGbRSRXn046zL-5yBhfGBGE0niWMafttXspL8A2AqOzbvNhZsA96Rx7oEthYCF3DdlA");'>
          </div>
        </div>
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
          <div class="mx-auto max-w-4xl text-center">
            <div class="flex flex-col items-center gap-6">
              <h1 class="text-4xl font-black leading-tight tracking-tighter text-white sm:text-5xl md:text-6xl">
                VERSA Manager: Software para talleres y flotas
              </h1>
              <p class="max-w-2xl text-lg font-normal text-[#A0A0A0] sm:text-xl">
                Gestiona órdenes, citas, facturación, inventario y clientes de tu taller de motos, bicis o renting desde
                una única plataforma en la nube.
              </p>
              <div class="mt-6 flex flex-col sm:flex-row items-center justify-center gap-4 w-full sm:w-auto">
                <button
                  class="flex w-full sm:w-auto min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-primary text-white text-base font-bold tracking-wide transition-opacity hover:opacity-90">
                  <span class="truncate">Probar VERSA Manager 30 días gratis</span>
                </button>
                <a class="group flex items-center gap-2 text-base font-medium text-[#A0A0A0] transition-colors hover:text-white"
                  href="#">
                  <span>Hablar con un asesor de VERSA</span>
                  <span
                    class="material-symbols-outlined transition-transform group-hover:translate-x-1">arrow_forward</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Features Section -->
      <section id="funcionalidades" class="bg-background-dark py-16 px-4 sm:px-6 lg:px-8 border-t border-white/5">
        <div class="flex w-full max-w-5xl mx-auto flex-col">
          <div class="flex flex-col gap-12 py-10">
            <div class="flex flex-col items-center text-center gap-6">
              <div class="flex flex-col gap-4">
                <h2 class="text-white text-3xl font-black tracking-tighter sm:text-4xl md:text-5xl">
                  Todo lo que tu taller necesita
                </h2>
                <p class="text-[#EAEAEA]/80 text-base font-normal leading-normal max-w-3xl mx-auto">
                  Centraliza la operativa diaria y elimina el caos de papeles y hojas de cálculo. VERSA Manager te da el
                  control total de tu negocio.
                </p>
              </div>
            </div>
            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
              <!-- Card 1 -->
              <div
                class="flex flex-1 flex-col gap-4 rounded-lg border border-white/10 bg-[#1E1E1E] p-6 transition-all hover:border-primary/50 hover:shadow-2xl hover:shadow-primary/10">
                <span class="material-symbols-outlined text-primary" style="font-size: 32px;">build_circle</span>
                <div class="flex flex-col gap-1">
                  <h3 class="text-white text-lg font-bold leading-tight">Órdenes de trabajo</h3>
                  <p class="text-[#EAEAEA]/70 text-sm font-normal leading-normal">
                    Crea órdenes digitales, asigna mecánicos y notifica el estado del vehículo al cliente por email o
                    WhatsApp.
                  </p>
                </div>
              </div>
              <!-- Card 2 -->
              <div
                class="flex flex-1 flex-col gap-4 rounded-lg border border-white/10 bg-[#1E1E1E] p-6 transition-all hover:border-primary/50 hover:shadow-2xl hover:shadow-primary/10">
                <span class="material-symbols-outlined text-primary" style="font-size: 32px;">calendar_month</span>
                <div class="flex flex-col gap-1">
                  <h3 class="text-white text-lg font-bold leading-tight">Calendario y citas</h3>
                  <p class="text-[#EAEAEA]/70 text-sm font-normal leading-normal">
                    Visualiza la carga de trabajo, gestiona citas previas y organiza la disponibilidad de tus
                    elevadores.
                  </p>
                </div>
              </div>
              <!-- Card 3 -->
              <div
                class="flex flex-1 flex-col gap-4 rounded-lg border border-white/10 bg-[#1E1E1E] p-6 transition-all hover:border-primary/50 hover:shadow-2xl hover:shadow-primary/10">
                <span class="material-symbols-outlined text-primary" style="font-size: 32px;">point_of_sale</span>
                <div class="flex flex-col gap-1">
                  <h3 class="text-white text-lg font-bold leading-tight">Caja y Facturación</h3>
                  <p class="text-[#EAEAEA]/70 text-sm font-normal leading-normal">
                    Control total de ingresos, compras, cierre de caja diario y múltiples métodos de pago.
                  </p>
                </div>
              </div>
              <!-- Card 4 -->
              <div
                class="flex flex-1 flex-col gap-4 rounded-lg border border-white/10 bg-[#1E1E1E] p-6 transition-all hover:border-primary/50 hover:shadow-2xl hover:shadow-primary/10">
                <span class="material-symbols-outlined text-primary" style="font-size: 32px;">request_quote</span>
                <div class="flex flex-col gap-1">
                  <h3 class="text-white text-lg font-bold leading-tight">Presupuestos rápidos</h3>
                  <p class="text-[#EAEAEA]/70 text-sm font-normal leading-normal">
                    Genera presupuestos profesionales que se convierten en órdenes de trabajo con un solo clic.
                  </p>
                </div>
              </div>
              <!-- Card 5 -->
              <div
                class="flex flex-1 flex-col gap-4 rounded-lg border border-white/10 bg-[#1E1E1E] p-6 transition-all hover:border-primary/50 hover:shadow-2xl hover:shadow-primary/10 sm:col-start-2 lg:col-start-auto">
                <span class="material-symbols-outlined text-primary" style="font-size: 32px;">inventory_2</span>
                <div class="flex flex-col gap-1">
                  <h3 class="text-white text-lg font-bold leading-tight">Inventario y Stock</h3>
                  <p class="text-[#EAEAEA]/70 text-sm font-normal leading-normal">
                    Control en tiempo real de repuestos, neumáticos y consumibles con alertas de stock bajo.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Sectores / Target Section -->
      <section class="bg-background-light dark:bg-[#181818] py-16 px-4 sm:px-8 md:px-16 lg:py-24">
        <div class="flex w-full max-w-6xl mx-auto flex-col">
          <div class="flex flex-col gap-10 py-10 @container">
            <div class="flex flex-col gap-6 items-center text-center">
              <div class="flex flex-col gap-4">
                <h2
                  class="font-display text-gray-900 dark:text-white tracking-tight text-[32px] font-bold leading-tight @[480px]:text-4xl @[480px]:font-black">
                  Una solución, múltiples modelos de negocio
                </h2>
                <p
                  class="font-display text-gray-600 dark:text-gray-300 text-base font-normal leading-normal max-w-[720px]">
                  VERSA Manager se adapta a tu flujo de trabajo, ya seas un taller de barrio especializado, una flota de
                  reparto o una empresa de renting.
                </p>
              </div>
              <button
                class="flex w-fit min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 @[480px]:h-12 @[480px]:px-5 bg-primary text-white text-sm font-bold leading-normal tracking-[0.015em]">
                <span class="truncate">Ver planes para empresas</span>
              </button>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
              <!-- Sector 1 -->
              <div
                class="flex flex-1 flex-col gap-3 rounded-xl border border-gray-200/50 dark:border-white/10 bg-white/50 dark:bg-black/20 p-4">
                <div class="text-primary">
                  <span class="material-symbols-outlined text-3xl">directions_car</span>
                </div>
                <div class="flex flex-col gap-1">
                  <h3 class="font-display text-gray-900 dark:text-white text-base font-bold leading-tight">Taller
                    Multimarca</h3>
                  <p class="font-display text-gray-500 dark:text-gray-400 text-sm font-normal leading-normal">
                    Gestión integral para talleres de motos y mecánica general.
                  </p>
                </div>
              </div>
              <!-- Sector 2 -->
              <div
                class="flex flex-1 flex-col gap-3 rounded-xl border border-gray-200/50 dark:border-white/10 bg-white/50 dark:bg-black/20 p-4">
                <div class="text-primary">
                  <span class="material-symbols-outlined text-3xl">ev_station</span>
                </div>
                <div class="flex flex-col gap-1">
                  <h3 class="font-display text-gray-900 dark:text-white text-base font-bold leading-tight">Especialistas
                    Eléctricos</h3>
                  <p class="font-display text-gray-500 dark:text-gray-400 text-sm font-normal leading-normal">
                    Módulo específico para gestión de baterías y componentes EV.
                  </p>
                </div>
              </div>
              <!-- Sector 3 -->
              <div
                class="flex flex-1 flex-col gap-3 rounded-xl border border-gray-200/50 dark:border-white/10 bg-white/50 dark:bg-black/20 p-4">
                <div class="text-primary">
                  <span class="material-symbols-outlined text-3xl">local_gas_station</span>
                </div>
                <div class="flex flex-col gap-1">
                  <h3 class="font-display text-gray-900 dark:text-white text-base font-bold leading-tight">Flotas y
                    Delivery</h3>
                  <p class="font-display text-gray-500 dark:text-gray-400 text-sm font-normal leading-normal">
                    Control de mantenimientos preventivos para alta rotación.
                  </p>
                </div>
              </div>
              <!-- Sector 4 -->
              <div
                class="flex flex-1 flex-col gap-3 rounded-xl border border-gray-200/50 dark:border-white/10 bg-white/50 dark:bg-black/20 p-4">
                <div class="text-primary">
                  <span class="material-symbols-outlined text-3xl">format_paint</span>
                </div>
                <div class="flex flex-col gap-1">
                  <h3 class="font-display text-gray-900 dark:text-white text-base font-bold leading-tight">Estética y
                    Custom</h3>
                  <p class="font-display text-gray-500 dark:text-gray-400 text-sm font-normal leading-normal">
                    Seguimiento detallado de proyectos de personalización.
                  </p>
                </div>
              </div>
              <!-- Sector 5 -->
              <div
                class="flex flex-1 flex-col gap-3 rounded-xl border border-gray-200/50 dark:border-white/10 bg-white/50 dark:bg-black/20 p-4">
                <div class="text-primary">
                  <span class="material-symbols-outlined text-3xl">memory</span>
                </div>
                <div class="flex flex-col gap-1">
                  <h3 class="font-display text-gray-900 dark:text-white text-base font-bold leading-tight">E-Bikes y
                    Patinetes</h3>
                  <p class="font-display text-gray-500 dark:text-gray-400 text-sm font-normal leading-normal">
                    Trazabilidad de electrónica y reparaciones de micromovilidad.
                  </p>
                </div>
              </div>
              <!-- Sector 6 -->
              <div
                class="flex flex-1 flex-col gap-3 rounded-xl border border-gray-200/50 dark:border-white/10 bg-white/50 dark:bg-black/20 p-4">
                <div class="text-primary">
                  <span class="material-symbols-outlined text-3xl">anchor</span>
                </div>
                <div class="flex flex-col gap-1">
                  <h3 class="font-display text-gray-900 dark:text-white text-base font-bold leading-tight">Custodia e
                    Invernaje</h3>
                  <p class="font-display text-gray-500 dark:text-gray-400 text-sm font-normal leading-normal">
                    Gestión de contratos de larga estancia y servicios asociados.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Value Proposition -->
      <section class="bg-background-light dark:bg-background-dark py-16 sm:py-24">
        <div class="layout-container flex h-full grow flex-col">
          <div class="px-4 sm:px-6 md:px-8 lg:px-16 xl:px-20 2xl:px-40 flex flex-1 justify-center">
            <div class="layout-content-container flex flex-col max-w-6xl flex-1">
              <div class="flex flex-col gap-10 lg:gap-16 py-10">
                <div class="flex flex-col gap-4 text-center">
                  <h2 class="text-gray-900 dark:text-white tracking-tight text-4xl font-bold leading-tight">
                    ¿Por qué elegir VERSA Manager?
                  </h2>
                  <p class="text-gray-600 dark:text-gray-300 text-lg font-normal leading-relaxed max-w-3xl mx-auto">
                    La plataforma diseñada para optimizar la rentabilidad de tu taller y simplificar tu vida.
                  </p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                  <div
                    class="flex flex-1 flex-col gap-4 rounded-xl border border-gray-200 dark:border-gray-800 bg-background-light dark:bg-gray-900/50 p-6 text-center transition-all duration-300 ease-in-out hover:shadow-xl hover:border-primary/50 dark:hover:border-primary/40">
                    <div class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-primary/10">
                      <span class="material-symbols-outlined text-primary text-4xl">autorenew</span>
                    </div>
                    <div class="flex flex-col gap-2">
                      <h3 class="text-gray-900 dark:text-white text-xl font-bold leading-tight">Siempre Actualizado</h3>
                      <p class="text-gray-500 dark:text-gray-400 text-base font-normal leading-relaxed">
                        Tu software mejora cada mes sin costes extra. Sin instalaciones complejas ni mantenimientos
                        técnicos.
                      </p>
                    </div>
                  </div>
                  <div
                    class="flex flex-1 flex-col gap-4 rounded-xl border border-gray-200 dark:border-gray-800 bg-background-light dark:bg-gray-900/50 p-6 text-center transition-all duration-300 ease-in-out hover:shadow-xl hover:border-primary/50 dark:hover:border-primary/40">
                    <div class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-primary/10">
                      <span class="material-symbols-outlined text-primary text-4xl">cloud_sync</span>
                    </div>
                    <div class="flex flex-col gap-2">
                      <h3 class="text-gray-900 dark:text-white text-xl font-bold leading-tight">100% en la Nube</h3>
                      <p class="text-gray-500 dark:text-gray-400 text-base font-normal leading-relaxed">
                        Accede a tu taller desde el móvil, tablet o PC. Gestiona tu negocio desde casa o de viaje.
                      </p>
                    </div>
                  </div>
                  <div
                    class="flex flex-1 flex-col gap-4 rounded-xl border border-gray-200 dark:border-gray-800 bg-background-light dark:bg-gray-900/50 p-6 text-center transition-all duration-300 ease-in-out hover:shadow-xl hover:border-primary/50 dark:hover:border-primary/40">
                    <div class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-primary/10">
                      <span class="material-symbols-outlined text-primary text-4xl">headset_mic</span>
                    </div>
                    <div class="flex flex-col gap-2">
                      <h3 class="text-gray-900 dark:text-white text-xl font-bold leading-tight">Soporte Experto</h3>
                      <p class="text-gray-500 dark:text-gray-400 text-base font-normal leading-relaxed">
                        Te ayudamos a importar tus datos y configurar tu cuenta. Habla con personas reales, no robots.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Pricing Section -->
      <section id="pricing" class="bg-background-dark py-16 sm:py-24 border-t border-white/5">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
          <div class="max-w-7xl mx-auto">

            <!-- Page Heading -->
            <div class="flex flex-col items-center text-center gap-4 mb-8">
              <h2 class="text-white text-4xl sm:text-5xl font-black leading-tight tracking-tight">
                Planes de Precios
              </h2>
              <p class="text-[#A0A0A0] text-base sm:text-lg font-normal leading-normal max-w-2xl">
                Planes flexibles sin permanencia, elige la opción que mejor se adapte a tu taller.
              </p>
            </div>

            <!-- Segmented Buttons (Monthly/Annual) -->
            <div class="flex justify-center mb-10">
              <div
                class="flex h-12 w-full max-w-md items-center justify-center rounded-lg bg-white/5 backdrop-blur-sm border border-white/10 p-1">
                <label
                  class="flex cursor-pointer h-full grow items-center justify-center overflow-hidden rounded-lg px-4 has-[:checked]:bg-primary has-[:checked]:shadow-lg has-[:checked]:text-white text-[#A0A0A0] text-sm font-medium leading-normal transition-all duration-200">
                  <span class="truncate">Pago Mensual</span>
                  <input checked class="invisible w-0" name="pricing-toggle" type="radio" value="monthly"
                    id="monthly-plan" />
                </label>
                <label
                  class="flex cursor-pointer h-full grow items-center justify-center overflow-hidden rounded-lg px-4 has-[:checked]:bg-primary has-[:checked]:shadow-lg has-[:checked]:text-white text-[#A0A0A0] text-sm font-medium leading-normal transition-all duration-200">
                  <span class="truncate">Pago Anual (Ahorra 16%)</span>
                  <input class="invisible w-0" name="pricing-toggle" type="radio" value="annual" id="annual-plan" />
                </label>
              </div>
            </div>

            <!-- Action Panel (Free Trial) -->
            <div class="mb-12">
              <div
                class="flex flex-col md:flex-row items-center justify-between gap-6 rounded-xl border border-white/10 bg-white/5 backdrop-blur-sm p-6">
                <div class="flex flex-col gap-2">
                  <p class="text-white text-lg font-bold leading-tight">Prueba VERSA Manager gratis por 15 días</p>
                  <p class="text-[#A0A0A0] text-base font-normal leading-normal">Sin compromisos, no se requiere tarjeta
                    de crédito.</p>
                </div>
                <button id="btn-start-trial"
                  class="flex min-w-[200px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-primary text-white text-base font-bold leading-normal hover:opacity-90 transition-opacity whitespace-nowrap">
                  <span class="truncate">Comenzar Prueba Gratuita</span>
                </button>
              </div>
            </div>

            <!-- Pricing Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">

              <!-- Plan Básico -->
              <div
                class="flex flex-col gap-6 rounded-xl border border-white/10 bg-[#1E1E1E] p-6 transition-all duration-300 hover:border-primary/50 hover:shadow-2xl hover:shadow-primary/10">
                <div class="flex flex-col gap-3">
                  <h3 class="text-white text-2xl font-bold leading-tight">Plan Taller Básico</h3>
                  <p class="text-[#A0A0A0] text-sm">Ideal para talleres pequeños y autónomos.</p>
                  <div class="flex items-baseline gap-2 pt-2">
                    <span class="text-white text-5xl font-black leading-tight monthly-price">30€</span>
                    <span class="text-white text-xl font-bold leading-tight annual-price hidden">25€</span>
                    <span class="text-[#A0A0A0] text-base font-bold leading-tight">/mes</span>
                  </div>
                </div>
                <button data-plan="basic"
                  class="btn-subscribe
                  flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-4 bg-white/10 hover:bg-white/20 text-white text-sm font-bold leading-normal transition-all border border-white/10">
                  <span class="truncate">Empezar</span>
                </button>
                <div class="flex flex-col gap-3">
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Hasta 2 usuarios</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Gestión de clientes y vehículos</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Órdenes de trabajo básicas</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Calendario y citas simples</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Facturación y caja básica</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Inventario sencillo</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Soporte estándar por email</span>
                  </div>
                </div>
              </div>

              <!-- Plan Pro (Most Popular) -->
              <div
                class="flex flex-col gap-6 rounded-xl border-2 border-primary bg-[#1E1E1E] p-6 relative transform lg:scale-105 shadow-2xl shadow-primary/20">
                <div
                  class="absolute -top-4 left-1/2 -translate-x-1/2 bg-primary text-white text-xs font-bold leading-normal px-4 py-1.5 rounded-full uppercase tracking-wide">
                  Más Popular
                </div>
                <div class="flex flex-col gap-3 mt-2">
                  <h3 class="text-white text-2xl font-bold leading-tight">Plan Taller Pro</h3>
                  <p class="text-[#A0A0A0] text-sm">Perfecto para talleres en crecimiento.</p>
                  <div class="flex items-baseline gap-2 pt-2">
                    <span class="text-white text-5xl font-black leading-tight monthly-price">59€</span>
                    <span class="text-white text-xl font-bold leading-tight annual-price hidden">49€</span>
                    <span class="text-[#A0A0A0] text-base font-bold leading-tight">/mes</span>
                  </div>
                </div>
                <button data-plan="pro"
                  class="btn-subscribe
                  flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-4 bg-primary hover:opacity-90 text-white text-sm font-bold leading-normal transition-all">
                  <span class="truncate">Elegir Plan Pro</span>
                </button>
                <div class="flex flex-col gap-3">
                  <div class="text-sm font-bold leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Todo en Básico</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Hasta 6 usuarios</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Hasta 3 sucursales</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Calendario avanzado multi-mecánico</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Presupuestos rápidos</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Control de stock avanzado</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Informes y estadísticas</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Soporte prioritario</span>
                  </div>
                </div>
              </div>

              <!-- Plan Flotas & Renting -->
              <div
                class="flex flex-col gap-6 rounded-xl border border-white/10 bg-[#1E1E1E] p-6 transition-all duration-300 hover:border-primary/50 hover:shadow-2xl hover:shadow-primary/10">
                <div class="flex flex-col gap-3">
                  <h3 class="text-white text-2xl font-bold leading-tight">Plan Flotas & Renting</h3>
                  <p class="text-[#A0A0A0] text-sm">Gestión de flotas y empresas de renting.</p>
                  <div class="flex items-baseline gap-2 pt-2">
                    <span class="text-white text-5xl font-black leading-tight monthly-price">99€</span>
                    <span class="text-white text-xl font-bold leading-tight annual-price hidden">83€</span>
                    <span class="text-[#A0A0A0] text-base font-bold leading-tight">/mes</span>
                  </div>
                </div>
                <button data-plan="fleet"
                  class="btn-subscribe
                  flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-4 bg-white/10 hover:bg-white/20 text-white text-sm font-bold leading-normal transition-all border border-white/10">
                  <span class="truncate">Contactar</span>
                </button>
                <div class="flex flex-col gap-3">
                  <div class="text-sm font-bold leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Todo en Pro</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Usuarios ilimitados</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Gestión de flotas completa</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Contratos de renting</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Mantenimientos programados</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Hasta 150-200 vehículos</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>API para integraciones</span>
                  </div>
                  <div class="text-sm font-normal leading-normal flex items-center gap-3 text-white">
                    <span class="material-symbols-outlined text-primary" style="font-size: 20px;">check_circle</span>
                    <span>Soporte prioritario + onboarding</span>
                  </div>
                </div>
              </div>

            </div>

          </div>
        </div>
      </section>

      <!-- Social Proof (MAP Section) -->
      <section class="border-t border-white/5 bg-background-dark py-16 px-4 sm:px-6 lg:px-8 relative overflow-hidden">

        <div class="flex w-full max-w-7xl mx-auto flex-col items-center gap-12 relative z-10">
          <div class="text-center max-w-3xl">
            <h2 class="text-white text-2xl font-bold tracking-tight sm:text-3xl mb-4">
              Talleres en Europa y LATAM ya confían en VERSA
            </h2>
            <p class="text-[#A0A0A0] text-base mb-6">
              Desde talleres locales en Madrid hasta flotas de renting en Buenos Aires. Únete a la red que está
              digitalizando el sector.
            </p>
          </div>

          <!-- MAPA INTERACTIVO -->
          <div id="map" class="w-full h-[500px] rounded-xl z-10 relative shadow-2xl border border-white/10"></div>

        </div>
      </section>

      <!-- FAQ Section -->
      <section id="faq" class="bg-background-light dark:bg-[#181818] py-16 px-4 sm:px-6 lg:px-8">
        <div class="max-w-3xl mx-auto">
          <h2 class="text-gray-900 dark:text-white text-3xl font-bold text-center mb-10">Preguntas Frecuentes</h2>
          <div class="flex flex-col gap-4">

            <!-- FAQ Item 1 -->
            <details
              class="group bg-white dark:bg-white/5 p-6 rounded-lg border border-gray-200 dark:border-white/10 open:border-primary/50 transition-all cursor-pointer">
              <summary
                class="flex justify-between items-center font-bold text-gray-900 dark:text-white text-lg select-none">
                ¿Es difícil migrar mis datos de otro software o Excel?
                <span class="material-symbols-outlined transition-transform group-open:rotate-180">expand_more</span>
              </summary>
              <div class="mt-4 text-gray-600 dark:text-gray-300 text-base leading-relaxed">
                Para nada. VERSA Manager cuenta con herramientas de importación masiva para clientes y productos.
                Además, nuestro equipo de soporte te guía paso a paso para que no pierdas ni un solo dato de tu
                historial.
              </div>
            </details>

            <!-- FAQ Item 2 -->
            <details
              class="group bg-white dark:bg-white/5 p-6 rounded-lg border border-gray-200 dark:border-white/10 open:border-primary/50 transition-all cursor-pointer">
              <summary
                class="flex justify-between items-center font-bold text-gray-900 dark:text-white text-lg select-none">
                ¿Necesito instalar algún programa en mi ordenador?
                <span class="material-symbols-outlined transition-transform group-open:rotate-180">expand_more</span>
              </summary>
              <div class="mt-4 text-gray-600 dark:text-gray-300 text-base leading-relaxed">
                No. VERSA Manager funciona 100% en la nube. Solo necesitas un navegador (Chrome, Safari, Firefox) y
                conexión a internet. Puedes acceder desde tu PC, tablet o móvil en cualquier momento.
              </div>
            </details>

            <!-- FAQ Item 3 -->
            <details
              class="group bg-white dark:bg-white/5 p-6 rounded-lg border border-gray-200 dark:border-white/10 open:border-primary/50 transition-all cursor-pointer">
              <summary
                class="flex justify-between items-center font-bold text-gray-900 dark:text-white text-lg select-none">
                ¿Sirve para gestionar flotas de renting o delivery?
                <span class="material-symbols-outlined transition-transform group-open:rotate-180">expand_more</span>
              </summary>
              <div class="mt-4 text-gray-600 dark:text-gray-300 text-base leading-relaxed">
                Sí, tenemos un módulo específico para empresas de renting y flotas. Puedes controlar mantenimientos
                preventivos, ubicación de vehículos, contratos de alquiler y facturación recurrente.
              </div>
            </details>

            <!-- FAQ Item 4 -->
            <details
              class="group bg-white dark:bg-white/5 p-6 rounded-lg border border-gray-200 dark:border-white/10 open:border-primary/50 transition-all cursor-pointer">
              <summary
                class="flex justify-between items-center font-bold text-gray-900 dark:text-white text-lg select-none">
                ¿Existe algún tipo de permanencia?
                <span class="material-symbols-outlined transition-transform group-open:rotate-180">expand_more</span>
              </summary>
              <div class="mt-4 text-gray-600 dark:text-gray-300 text-base leading-relaxed">
                No, no hay ningún tipo de permanencia en los planes mensuales. Puedes cancelar tu suscripción en
                cualquier momento sin penalizaciones. Si eliges el plan anual para aprovechar el descuento del 16%, el
                compromiso es por un año.
              </div>
            </details>

            <!-- FAQ Item 5 -->
            <details
              class="group bg-white dark:bg-white/5 p-6 rounded-lg border border-gray-200 dark:border-white/10 open:border-primary/50 transition-all cursor-pointer">
              <summary
                class="flex justify-between items-center font-bold text-gray-900 dark:text-white text-lg select-none">
                ¿Qué ocurre cuando termina mi prueba gratuita?
                <span class="material-symbols-outlined transition-transform group-open:rotate-180">expand_more</span>
              </summary>
              <div class="mt-4 text-gray-600 dark:text-gray-300 text-base leading-relaxed">
                Al finalizar los 15 días de prueba, podrás elegir el plan que mejor se adapte a tus necesidades e
                introducir tus datos de pago para continuar usando el servicio. No se te cobrará automáticamente.
              </div>
            </details>

            <!-- FAQ Item 6 -->
            <details
              class="group bg-white dark:bg-white/5 p-6 rounded-lg border border-gray-200 dark:border-white/10 open:border-primary/50 transition-all cursor-pointer">
              <summary
                class="flex justify-between items-center font-bold text-gray-900 dark:text-white text-lg select-none">
                ¿Puedo cambiar de plan más adelante?
                <span class="material-symbols-outlined transition-transform group-open:rotate-180">expand_more</span>
              </summary>
              <div class="mt-4 text-gray-600 dark:text-gray-300 text-base leading-relaxed">
                Sí, puedes cambiar de plan en cualquier momento desde el panel de administración. Si subes de plan, el
                cambio es inmediato. Si bajas de plan, el cambio se aplicará en el siguiente ciclo de facturación.
              </div>
            </details>

            <!-- FAQ Item 7 -->
            <details
              class="group bg-white dark:bg-white/5 p-6 rounded-lg border border-gray-200 dark:border-white/10 open:border-primary/50 transition-all cursor-pointer">
              <summary
                class="flex justify-between items-center font-bold text-gray-900 dark:text-white text-lg select-none">
                ¿Cómo funciona el pago anual?
                <span class="material-symbols-outlined transition-transform group-open:rotate-180">expand_more</span>
              </summary>
              <div class="mt-4 text-gray-600 dark:text-gray-300 text-base leading-relaxed">
                El pago anual te permite ahorrar un 16% en comparación con el pago mensual. Se factura una vez al año y
                obtienes acceso a todas las funcionalidades del plan elegido durante 12 meses. Es como obtener 2 meses
                gratis.
              </div>
            </details>

          </div>
        </div>
      </section>

    </main>
  </div>

  <!-- Modal de Email para Suscripción -->
  <div id="email-modal" class="hidden fixed inset-0 z-50 items-center justify-center bg-black/80 backdrop-blur-sm p-4">
    <div
      class="bg-[#1E1E1E] rounded-2xl border border-white/10 max-w-md w-full p-8 shadow-2xl transform transition-all animate-scale-in">

      <!-- Icono -->
      <div class="mx-auto w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-6">
        <span class="material-symbols-outlined text-primary text-4xl">email</span>
      </div>

      <!-- Título -->
      <h3 class="text-2xl font-black text-white text-center mb-2">
        ¡Casi listo!
      </h3>
      <p class="text-gray-400 text-center mb-6">
        Ingresa tu email para continuar con la suscripción
      </p>

      <!-- Input de Email -->
      <div class="mb-4">
        <label for="email-input" class="block text-sm font-medium text-gray-300 mb-2">
          Email
        </label>
        <input type="email" id="email-input" placeholder="tu@email.com"
          class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all" />

        <!-- Mensaje de error -->
        <p id="email-error" class="hidden text-red-500 text-sm mt-2 flex items-center gap-1">
          <span class="material-symbols-outlined text-sm">error</span>
          <span></span>
        </p>
      </div>

      <!-- Nota de privacidad -->
      <p class="text-xs text-gray-500 mb-6 text-center">
        <span class="material-symbols-outlined text-sm inline-block align-middle">lock</span>
        Tu email está seguro. No compartimos tus datos.
      </p>

      <!-- Botones -->
      <div class="flex gap-3">
        <button id="cancel-email-btn"
          class="flex-1 px-4 py-3 bg-white/5 hover:bg-white/10 border border-white/10 text-white font-medium rounded-lg transition-all">
          Cancelar
        </button>
        <button id="submit-email-btn"
          class="flex-1 px-4 py-3 bg-primary hover:opacity-90 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2">
          <span>Continuar</span>
          <span class="material-symbols-outlined text-lg">arrow_forward</span>
        </button>
      </div>

    </div>
  </div>

  <!-- Leaflet Script -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script>
    // ====================================
    // FUNCIONES GLOBALES (disponibles en todo el documento)
    // ====================================

    // Detectar el puerto correcto del backend
    const API_BASE_URL = window.location.hostname === 'localhost'
      ? 'http://localhost:3000'
      : 'https://versa-app-dev.up.railway.app';

    // Variables globales para almacenar el plan seleccionado
    let selectedPlan = null;
    let selectedBillingInterval = null;
    let currentButton = null;

    /**
     * Muestra el modal de email
     */
    function showEmailModal(plan, billingInterval, button) {
      selectedPlan = plan;
      selectedBillingInterval = billingInterval;
      currentButton = button;

      const modal = document.getElementById('email-modal');
      const emailInput = document.getElementById('email-input');

      if (modal && emailInput) {
        modal.classList.remove('hidden');
        modal.classList.add('flex');

        // Focus en el input después de la animación
        setTimeout(() => emailInput.focus(), 100);
      }
    }

    /**
     * Cierra el modal de email
     */
    function closeEmailModal() {
      const modal = document.getElementById('email-modal');
      const emailInput = document.getElementById('email-input');
      const errorMsg = document.getElementById('email-error');

      if (modal) {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
      }

      if (emailInput) {
        emailInput.value = '';
        emailInput.classList.remove('border-red-500');
      }

      if (errorMsg) {
        errorMsg.classList.add('hidden');
      }

      // Restaurar botón si existe
      if (currentButton) {
        currentButton.disabled = false;
        currentButton.innerHTML = currentButton.dataset.originalText || currentButton.innerHTML;
      }
    }

    /**
     * Valida el email
     */
    function isValidEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    /**
     * Procesa la suscripción
     */
    async function processSubscription() {
      const emailInput = document.getElementById('email-input');
      const errorMsg = document.getElementById('email-error');
      const submitBtn = document.getElementById('submit-email-btn');

      if (!emailInput || !errorMsg || !submitBtn) {
        console.error('Elementos del modal no encontrados');
        return;
      }

      const email = emailInput.value.trim();

      // Validar email
      if (!email) {
        errorMsg.textContent = 'Por favor, ingresa tu email';
        errorMsg.classList.remove('hidden');
        emailInput.classList.add('border-red-500');
        return;
      }

      if (!isValidEmail(email)) {
        errorMsg.textContent = 'Por favor, ingresa un email válido';
        errorMsg.classList.remove('hidden');
        emailInput.classList.add('border-red-500');
        return;
      }

      // Ocultar error
      errorMsg.classList.add('hidden');
      emailInput.classList.remove('border-red-500');

      // Mostrar loading
      const originalBtnText = submitBtn.innerHTML;
      submitBtn.disabled = true;
      submitBtn.innerHTML = `
        <svg class="animate-spin h-5 w-5 text-white inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <span class="ml-2">Procesando...</span>
      `;

      try {
        // Llamar al backend para crear la checkout session
        const response = await fetch(`${API_BASE_URL}/api/stripe/create-checkout-session`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            tenantId: 1, // TEMPORAL: En producción, esto vendría del registro/login
            plan: selectedPlan,
            billingInterval: selectedBillingInterval,
            email: email,
          }),
        });

        const data = await response.json();

        if (response.ok && data.ok && data.url) {
          // Éxito - Redirigir a Stripe Checkout
          window.location.href = data.url;
        } else {
          // Error del servidor
          throw new Error(data.error || 'Error al crear la sesión de pago');
        }

      } catch (error) {
        console.error('Error:', error);

        // Mostrar error en el modal
        errorMsg.textContent = error.message || 'Error al conectar con el servidor. Por favor, intenta de nuevo.';
        errorMsg.classList.remove('hidden');

        // Restaurar botón
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalBtnText;
      }
    }

    // Exponer funciones al scope global (para onclick)
    window.showEmailModal = showEmailModal;
    window.closeEmailModal = closeEmailModal;
    window.processSubscription = processSubscription;

    // ====================================
    // INICIALIZACIÓN DEL DOCUMENTO
    // ====================================

    document.addEventListener('DOMContentLoaded', function () {
      // Mobile Menu Logic
      const menuBtn = document.getElementById('mobile-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');

      if (menuBtn && mobileMenu) {
        menuBtn.addEventListener('click', () => {
          mobileMenu.classList.toggle('hidden');
          const icon = menuBtn.querySelector('.material-symbols-outlined');
          if (icon) {
            icon.textContent = mobileMenu.classList.contains('hidden') ? 'menu' : 'close';
          }
        });
      }

      // Pricing Toggle Logic
      const monthlyPlanRadio = document.getElementById('monthly-plan');
      const annualPlanRadio = document.getElementById('annual-plan');

      if (monthlyPlanRadio && annualPlanRadio) {
        const togglePricing = () => {
          const isAnnual = annualPlanRadio.checked;
          const monthlyPrices = document.querySelectorAll('.monthly-price');
          const annualPrices = document.querySelectorAll('.annual-price');

          if (isAnnual) {
            monthlyPrices.forEach(el => el.classList.add('hidden'));
            annualPrices.forEach(el => el.classList.remove('hidden'));
          } else {
            monthlyPrices.forEach(el => el.classList.remove('hidden'));
            annualPrices.forEach(el => el.classList.add('hidden'));
          }
        };

        monthlyPlanRadio.addEventListener('change', togglePricing);
        annualPlanRadio.addEventListener('change', togglePricing);
      }

      // --- INTEGRACIÓN CON STRIPE ---

      // Agregar event listeners a todos los botones de suscripción
      document.querySelectorAll('.btn-subscribe').forEach(button => {
        button.addEventListener('click', (event) => {
          event.preventDefault();
          const plan = button.dataset.plan; // 'basic', 'pro', o 'fleet'

          // Determinar si es mensual o anual según el toggle
          const isAnnual = annualPlanRadio && annualPlanRadio.checked;
          const billingInterval = isAnnual ? 'yearly' : 'monthly';

          // Guardar el texto original para restaurarlo en caso de error
          button.dataset.originalText = button.innerHTML;

          // Mostrar modal
          showEmailModal(plan, billingInterval, button);
        });
      });

      // Botón de "Comenzar Prueba Gratuita"
      const btnStartTrial = document.getElementById('btn-start-trial');
      if (btnStartTrial) {
        btnStartTrial.addEventListener('click', (event) => {
          event.preventDefault();
          const button = event.target.closest('button');
          button.dataset.originalText = button.innerHTML;

          // Por defecto, la prueba gratuita será con el plan PRO y mensual
          showEmailModal('pro', 'monthly', button);
        });
      }

      // Cerrar modal al hacer clic fuera
      document.addEventListener('click', (e) => {
        const modal = document.getElementById('email-modal');
        if (e.target === modal) {
          closeEmailModal();
        }
      });

      // Cerrar modal con ESC
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeEmailModal();
        }
      });

      // Submit al presionar Enter en el input
      const emailInput = document.getElementById('email-input');
      if (emailInput) {
        emailInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            e.preventDefault();
            processSubscription();
          }
        });
      }

      // Event listeners para botones del modal
      const cancelEmailBtn = document.getElementById('cancel-email-btn');
      const submitEmailBtn = document.getElementById('submit-email-btn');

      if (cancelEmailBtn) {
        cancelEmailBtn.addEventListener('click', () => {
          closeEmailModal();
        });
      }

      if (submitEmailBtn) {
        submitEmailBtn.addEventListener('click', () => {
          processSubscription();
        });
      }

      // --- FIN INTEGRACIÓN STRIPE ---

      // Initialize map centered on Spain/Portugal to show density, but zoomed out enough to see context
      var map = L.map('map').setView([40.4168, -3.7038], 5);

      // Add CartoDB Dark Matter Tiles (The "Dark Mode" look)
      L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
        subdomains: 'abcd',
        maxZoom: 20
      }).addTo(map);

      // Custom "V" Marker Icon definition using the new image
      var VersaIcon = L.divIcon({
        className: 'custom-div-icon',
        html: "<div style='position: relative; width: 32px; height: 32px;'><img src='https://imgur.com/iBrjKwv.png' class='versa-marker-image'><div class='marker-pulse'></div></div>",
        iconSize: [32, 32],
        iconAnchor: [16, 16], // Center of the icon
        popupAnchor: [0, -16]
      });

      // Locations Data (Based on your list)
      var locations = [
        // MADRID
        { lat: 40.435, lng: -3.655, title: "Bicicletas Chapinal (Madrid)" },
        { lat: 40.425, lng: -3.665, title: "Mammoth Berro (Madrid)" },
        { lat: 40.545, lng: -3.630, title: "REPARA BICICLETAS (Madrid)" },
        { lat: 40.350, lng: -3.690, title: "RRBIKE (Madrid)" },
        { lat: 40.480, lng: -3.700, title: "Factory Bike (Madrid)" },
        // NUEVAS DIRECCIONES EN MADRID
        { lat: 40.4233, lng: -3.7065, title: "Taller Centro (C. del Tesoro, 26)" },
        { lat: 40.4358, lng: -3.6480, title: "Taller C. Madres Pl. de Mayo, 8, Cdad. Lineal, 28017 Madrid" },
        // BARCELONA
        { lat: 41.400, lng: 2.150, title: "BCN Bikes (Barcelona)" },
        { lat: 41.405, lng: 2.190, title: "TBBS Taller (Barcelona)" },
        // SEVILLA
        { lat: 37.390, lng: -5.970, title: "Reaction Bikes (Sevilla)" },
        // ALICANTE
        { lat: 38.400, lng: -0.430, title: "Bici San Juan (Alicante)" },
        // PORTUGAL
        { lat: 38.750, lng: -9.130, title: "Armazéns Airaf (Lisboa)" },
        { lat: 38.690, lng: -9.210, title: "Biclas Belém (Lisboa)" },
        // LATAM (Added, will be visible on zoom out)
        { lat: 19.390, lng: -99.150, title: "Universum Bike (CDMX)" },
        { lat: 4.740, lng: -74.100, title: "Rodar Bogotá (Colombia)" },
        { lat: -33.420, lng: -70.610, title: "5Norte (Santiago de Chile)" }
      ];

      // Add markers to map
      locations.forEach(function (loc) {
        L.marker([loc.lat, loc.lng], { icon: VersaIcon })
          .addTo(map)
          .bindPopup('<strong style="color:black;">' + loc.title + '</strong>');
      });

      // Disable scroll zoom to prevent annoying page scroll behavior
      map.scrollWheelZoom.disable();

      // Add zoom control listener to re-enable on focus if needed, or keep simple
      map.on('focus', () => { map.scrollWheelZoom.enable(); });
      map.on('blur', () => { map.scrollWheelZoom.disable(); });
    });
  </script>

  <!-- WhatsApp Widget Script -->
  <script src="whatsapp-widget.js"></script>
</body>

</html>