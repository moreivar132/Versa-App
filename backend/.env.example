# Variables de entorno para VERSA Manager Backend
# IMPORTANTE: Este es un archivo de ejemplo. Copia este archivo a .env y rellena con tus valores reales.

# --- Base de Datos (PostgreSQL - Neon) ---
DATABASE_URL=postgresql://usuario:password@host:5432/database

# --- JWT ---
JWT_SECRET=tu_secreto_jwt_super_seguro_cambiar_esto

# --- Puerto del servidor ---
PORT=3000

# --- Stripe (NO PONER CLAVES REALES EN ESTE ARCHIVO) ---
# Obtén estas claves desde tu dashboard de Stripe: https://dashboard.stripe.com/apikeys

# Clave secreta de Stripe (sk_live_... para producción, sk_test_... para desarrollo)
STRIPE_SECRET_KEY=sk_test_...

# Secreto del webhook de Stripe (obtener desde: https://dashboard.stripe.com/webhooks)
STRIPE_WEBHOOK_SECRET=whsec_...

# Price IDs de Stripe para cada plan (obtener desde: https://dashboard.stripe.com/products)
# BÁSICO
STRIPE_PRICE_BASIC_MONTHLY=price_...
STRIPE_PRICE_BASIC_YEARLY=price_...

# PRO
STRIPE_PRICE_PRO_MONTHLY=price_...
STRIPE_PRICE_PRO_YEARLY=price_...

# FLEET (Flotas & Renting)
STRIPE_PRICE_FLEET_MONTHLY=price_...
STRIPE_PRICE_FLEET_YEARLY=price_...

# URLs de redirección después del checkout (SUSCRIPCIONES)
# {CHECKOUT_SESSION_ID} será reemplazado automáticamente por Stripe
STRIPE_SUCCESS_URL=https://tu-dominio.com/success
STRIPE_CANCEL_URL=https://tu-dominio.com/cancel

# --- Marketplace Pagos (Reservas) ---
# Base URL del frontend (sin trailing slash)
FRONTEND_BASE_URL=http://localhost:5173

# Paths para redirección después de Stripe Checkout (reservas marketplace)
# El path completo será: FRONTEND_BASE_URL + STRIPE_SUCCESS_PATH
STRIPE_SUCCESS_PATH=/stripe-success.html
STRIPE_CANCEL_PATH=/stripe-cancel.html

# --- Entorno ---
NODE_ENV=development
# NODE_ENV=production  # Descomentar en producción

# --- Otras configuraciones (según necesidades actuales) ---
# Agrega aquí cualquier otra variable que necesite tu aplicación

# --- Fidelización / Loyalty ---
# Pepper secreto para hashear tokens públicos (cambiar en producción)
LOYALTY_PUBLIC_TOKEN_PEPPER=cambiar_esto_en_produccion_secreto_largo

# Tiempo de vida del QR dinámico en segundos (default: 5 minutos)
LOYALTY_QR_TTL_SECONDS=300

# Intervalo de refresco del QR en el cliente en segundos (default: 30s)
LOYALTY_QR_REFRESH_SECONDS=30

# URL base pública del frontend (sin trailing slash)
PUBLIC_BASE_URL=http://localhost:5173

# --- Open Banking (TrueLayer) ---
# Entorno: sandbox para desarrollo, live para producción
TRUELAYER_ENV=sandbox

# Credenciales de TrueLayer (obtener desde https://console.truelayer.com)
TRUELAYER_CLIENT_ID=
TRUELAYER_CLIENT_SECRET=

# URI de callback (debe estar en allowlist de TrueLayer Console)
TRUELAYER_REDIRECT_URI=http://localhost:3000/api/open-banking/truelayer/callback

# URLs base de TrueLayer (no cambiar normalmente)
TRUELAYER_AUTH_BASE=https://auth.truelayer.com
TRUELAYER_API_BASE=https://api.truelayer.com

# Clave de cifrado para tokens (32 bytes hex = 64 caracteres)
# Generar con: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
OPEN_BANKING_TOKEN_ENC_KEY=

# Días de historial a descargar en sync inicial (default 90)
OPEN_BANKING_DEFAULT_FROM_DAYS=90
