
> versa-backend@1.0.0 migrate:latest
> knex migrate:latest

[dotenv@17.2.3] injecting env (3) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
Using environment: [35mdevelopment[39m
[33mmigration file "20260101000000_schema_dump_fixed.js" failed[39m
[33mmigration failed with error: 
    CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

    -- Time update helpers
    CREATE OR REPLACE FUNCTION update_updated_at_column() RETURNS TRIGGER AS $$
    BEGIN
       NEW.updated_at = now();
       RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;

    CREATE OR REPLACE FUNCTION update_timestamp() RETURNS TRIGGER AS $$
    BEGIN
       NEW.updated_at = now();
       RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;

    CREATE OR REPLACE FUNCTION update_dashboard_prefs_updated_at() RETURNS TRIGGER AS $$
    BEGIN
       NEW.last_updated = now();
       RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;

    -- RLS Helpers (Standard Implementation)
    CREATE OR REPLACE FUNCTION app_current_tenant() RETURNS varchar AS $$
      SELECT current_setting('app.current_tenant', true)::varchar;
    $$ LANGUAGE sql STABLE;

    CREATE OR REPLACE FUNCTION app_is_superadmin() RETURNS boolean AS $$
      SELECT current_setting('app.is_superadmin', true)::boolean;
    $$ LANGUAGE sql STABLE;
   - cannot change return type of existing function[39m
[31m
    CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

    -- Time update helpers
    CREATE OR REPLACE FUNCTION update_updated_at_column() RETURNS TRIGGER AS $$
    BEGIN
       NEW.updated_at = now();
       RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;

    CREATE OR REPLACE FUNCTION update_timestamp() RETURNS TRIGGER AS $$
    BEGIN
       NEW.updated_at = now();
       RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;

    CREATE OR REPLACE FUNCTION update_dashboard_prefs_updated_at() RETURNS TRIGGER AS $$
    BEGIN
       NEW.last_updated = now();
       RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;

    -- RLS Helpers (Standard Implementation)
    CREATE OR REPLACE FUNCTION app_current_tenant() RETURNS varchar AS $$
      SELECT current_setting('app.current_tenant', true)::varchar;
    $$ LANGUAGE sql STABLE;

    CREATE OR REPLACE FUNCTION app_is_superadmin() RETURNS boolean AS $$
      SELECT current_setting('app.is_superadmin', true)::boolean;
    $$ LANGUAGE sql STABLE;
   - cannot change return type of existing function[39m
[31merror: 
    CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

    -- Time update helpers
    CREATE OR REPLACE FUNCTION update_updated_at_column() RETURNS TRIGGER AS $$
    BEGIN
       NEW.updated_at = now();
       RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;

    CREATE OR REPLACE FUNCTION update_timestamp() RETURNS TRIGGER AS $$
    BEGIN
       NEW.updated_at = now();
       RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;

    CREATE OR REPLACE FUNCTION update_dashboard_prefs_updated_at() RETURNS TRIGGER AS $$
    BEGIN
       NEW.last_updated = now();
       RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;

    -- RLS Helpers (Standard Implementation)
    CREATE OR REPLACE FUNCTION app_current_tenant() RETURNS varchar AS $$
      SELECT current_setting('app.current_tenant', true)::varchar;
    $$ LANGUAGE sql STABLE;

    CREATE OR REPLACE FUNCTION app_is_superadmin() RETURNS boolean AS $$
      SELECT current_setting('app.is_superadmin', true)::boolean;
    $$ LANGUAGE sql STABLE;
   - cannot change return type of existing function
    at Parser.parseErrorMessage (C:\Users\moreivar\Desktop\Versa-App\node_modules\pg-protocol\dist\parser.js:285:98)
    at Parser.handlePacket (C:\Users\moreivar\Desktop\Versa-App\node_modules\pg-protocol\dist\parser.js:122:29)
    at Parser.parse (C:\Users\moreivar\Desktop\Versa-App\node_modules\pg-protocol\dist\parser.js:35:38)
    at TLSSocket.<anonymous> (C:\Users\moreivar\Desktop\Versa-App\node_modules\pg-protocol\dist\index.js:11:42)
    at TLSSocket.emit (node:events:508:28)
    at addChunk (node:internal/streams/readable:559:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
    at Readable.push (node:internal/streams/readable:390:5)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:189:23)[39m
npm error Lifecycle script `migrate:latest` failed with error:
npm error code 1
npm error path C:\Users\moreivar\Desktop\Versa-App\backend
npm error workspace versa-backend@1.0.0
npm error location C:\Users\moreivar\Desktop\Versa-App\backend
npm error command failed
npm error command C:\WINDOWS\system32\cmd.exe /d /s /c knex migrate:latest
