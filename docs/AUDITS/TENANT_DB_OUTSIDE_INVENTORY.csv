path,type,runtime,pattern,pool_count,client_count,total_count,module_or_vertical,risk,notes
backend/routes/auth.js,route,A,pool.query,5,0,5,Core,S1,Login/auth - critical security
backend/routes/customerPortal.js,route,A,pool.query,1,0,1,Marketplace,S2,Customer portal payments
backend/routes/dashboardPrefs.js,route,A,pool.query,3,0,3,Manager,S3,Dashboard preferences
backend/routes/impuestos.js,route,A,pool.query,1,0,1,Manager,S3,Tax config
backend/routes/marketplace.js,route,A,pool.query,1,0,1,Marketplace,S2,Public marketplace
backend/routes/marketplaceAdmin.js,route,A,pool.query,1,0,1,Marketplace,S2,Marketplace admin
backend/routes/meRoutes.js,route,A,pool.query,1,0,1,Core,S2,User profile
backend/routes/subscriptions.js,route,A,pool.query,2,0,2,Core,S1,Billing subscriptions
backend/routes/tecnicos.js,route,A,pool.query,1,0,1,Manager,S2,Technicians
backend/routes/customerGoogleAuth.js,route,A,client.query,0,6,6,Core,S1,SAFE: uses getSystemDb().connect() - transactional
backend/routes/invitePublic.js,route,A,client.query,0,14,14,Core,S1,SAFE: uses getSystemDb().connect() - transactional
backend/routes/trabajadores.js,route,A,client.query,0,6,6,Manager,S2,SAFE: uses getTenantDb.tx() - transactional
backend/middleware/featureGate.js,middleware,A,pool.query,1,0,1,Core,S1,Feature gating
backend/middleware/rbac.js,middleware,A,pool.query,4,0,4,Core,S1,RBAC permission check
backend/middleware/subscriptionCheck.js,middleware,A,pool.query,1,0,1,Core,S1,Subscription validation
backend/services/auditService.js,service,A,pool.query,2,0,2,Core,S2,Audit logging
backend/services/customerPortalService.js,service,A,pool.query,3,0,3,Marketplace,S2,Customer portal payments
backend/services/googleAuthService.js,service,A,client.query,0,9,9,Core,S1,SAFE: uses getSystemDb().connect() - transactional
backend/services/makeEmailProvider.js,service,A,pool.query,1,0,1,Core,S3,Email provider
backend/services/marketplaceService.js,service,A,pool.query+pool.connect,2,22,24,Marketplace,S2,Marketplace bookings
backend/services/notificacionService.js,service,A,pool.query,6,0,6,Manager,S2,Notifications
backend/services/ordenPDFService.js,service,A,pool.query,4,0,4,Manager,S2,Order PDF generation
backend/services/unifiedNotificationService.js,service,A,pool.query,3,0,3,Manager,S2,Unified notifications
backend/services/ventaPDFService.js,service,A,pool.query,3,0,3,Manager,S2,Sale PDF generation
backend/models/vehiculoModel.js,model,A,pool.query,6,0,6,Manager,S2,Vehicle model
backend/src/core/security/context.js,core,A,pool.query,5,0,5,Core,S1,Security context
backend/src/core/security/requireVerticalAccess.js,core,A,pool.query,5,0,5,Core,S1,Vertical access check
backend/src/modules/contable/api/controllers/documentos.controller.js,controller,A,pool.query,3,0,3,FinSaaS,S1,FinSaaS documents
backend/api/marketplace/busqueda.js,api,A,pool.query,1,0,1,Marketplace,S2,Marketplace search
backend/api/marketplace/sucursales.js,api,A,pool.query,1,0,1,Marketplace,S2,Marketplace branches
backend/src/app.js,core,A,pool.query,1,0,1,Core,S3,App bootstrap - health check only
backend/index.js,core,A,pool.query,1,0,1,Core,S3,Index bootstrap - health check only
backend/legacy/backend/clientes/clientes.js,legacy,B,pool.query,7,0,7,Manager,S3,Legacy clientes
backend/legacy/backend/vehiculos/vehiculos.js,legacy,B,pool.query,4,0,4,Manager,S3,Legacy vehiculos
backend/legacy/sql-migrations/add_concepto_descripcion_cajamovimiento.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/legacy/sql-migrations/add_medio_pago_to_cuenta.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/legacy/sql-migrations/create_caja_chica_tables.js,migration,C,pool.query,5,0,5,Core,S3,Migration
backend/legacy/sql-migrations/create_ordenconfigtenant.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/legacy/sql-migrations/create_whatsapp_timelines_tables.js,migration,C,pool.query,3,0,3,Core,S3,Migration
backend/legacy/sql-migrations/ejecutar_migracion_billing.js,migration,C,pool.query,4,0,4,Core,S3,Migration
backend/legacy/sql-migrations/ejecutar_migracion_rbac.js,migration,C,pool.query,4,0,4,Core,S3,Migration
backend/legacy/sql-migrations/populate_planes_suscripcion.js,migration,C,pool.query,4,0,4,Core,S3,Migration
backend/legacy/sql-migrations/run_contabilidad_v3_migration.js,migration,C,pool.query,1,0,1,FinSaaS,S3,Migration
backend/legacy/sql-migrations/run_contable_v2_migration.js,migration,C,pool.query,1,0,1,FinSaaS,S3,Migration
backend/legacy/sql-migrations/seed_billing_plans.js,migration,C,pool.query,4,0,4,Core,S3,Migration
backend/legacy/sql-migrations/seed_email_templates.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/legacy/sql-migrations/seed_rbac_permissions.js,migration,C,pool.query,2,0,2,Core,S3,Migration
backend/legacy/sql-migrations/seed_rbac_roles.js,migration,C,pool.query,2,0,2,Core,S3,Migration
backend/migrations/add_concepto_descripcion_cajamovimiento.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/migrations/add_medio_pago_to_cuenta.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/migrations/create_ordenconfigtenant.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/migrations/create_whatsapp_timelines_tables.js,migration,C,pool.query,3,0,3,Core,S3,Migration
backend/migrations/ejecutar_migracion_billing.js,migration,C,pool.query,4,0,4,Core,S3,Migration
backend/migrations/ejecutar_migracion_rbac.js,migration,C,pool.query,4,0,4,Core,S3,Migration
backend/migrations/populate_planes_suscripcion.js,migration,C,pool.query,4,0,4,Core,S3,Migration
backend/migrations/run_accounting_empresa_migration.js,migration,C,pool.query,1,0,1,FinSaaS,S3,Migration
backend/migrations/run_b2b_invite_migration.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/migrations/run_contabilidad_v3_migration.js,migration,C,pool.query,1,0,1,FinSaaS,S3,Migration
backend/migrations/run_contable_v2_migration.js,migration,C,pool.query,1,0,1,FinSaaS,S3,Migration
backend/migrations/run_deducible_validation_migration.js,migration,C,pool.query,1,0,1,FinSaaS,S3,Migration
backend/migrations/run_legacy_rbac_migration.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/migrations/run_oauth_migration.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/migrations/run_vertical_access_migration.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/migrations/seed_billing_plans.js,migration,C,pool.query,4,0,4,Core,S3,Migration
backend/migrations/seed_email_templates.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/migrations/seed_rbac_permissions.js,migration,C,pool.query,2,0,2,Core,S3,Migration
backend/migrations/seed_rbac_roles.js,migration,C,pool.query,2,0,2,Core,S3,Migration
backend/migrations/seed_verticals.js,migration,C,pool.query,1,0,1,Core,S3,Migration
backend/scripts/check-no-pool-query.js,script,C,pool.query,5,0,5,Core,S3,Guardrails script - SAFE
backend/scripts/check-pending-payments.js,script,C,pool.query,3,0,3,Core,S3,Maintenance script
backend/scripts/asignar-tecnicos-especifico.js,script,C,pool.query,1,0,1,Manager,S3,Maintenance script
backend/scripts/asignar-tecnicos-sucursales.js,script,C,pool.query,1,0,1,Manager,S3,Maintenance script
backend/scripts/asignar-todos-tecnicos.js,script,C,pool.query,1,0,1,Manager,S3,Maintenance script
backend/scripts/fix-product-providers.js,script,C,pool.query,1,0,1,Manager,S3,Maintenance script
backend/scripts/fix_mediopago.js,script,C,pool.query,2,0,2,Manager,S3,Maintenance script
backend/scripts/migrate-to-income-ledger.js,script,C,pool.query,1,0,1,FinSaaS,S3,Migration script
backend/scripts/repair_marketplace_links.js,script,C,pool.query,1,0,1,Marketplace,S3,Repair script
backend/scripts/seed_contabilidad_qa.js,script,C,pool.query,1,0,1,FinSaaS,S3,Seed script
backend/scripts/seed_finsaas_qa.js,script,C,pool.query,1,0,1,FinSaaS,S3,Seed script
backend/scripts/verificar-tecnicos.js,script,C,pool.query,1,0,1,Manager,S3,Verification script
backend/tests/integration/contabilidad.qa.test.js,test,C,pool.query,1,0,1,FinSaaS,S3,Test file
backend/tests/integration/deducible.qa.test.js,test,C,pool.query,1,0,1,FinSaaS,S3,Test file
backend/tests/integration/ordenes_km_required.test.js,test,C,pool.query,1,0,1,Manager,S3,Test file
backend/tests/unit/controllers/empresaController.test.js,test,C,pool.query+pool.connect,7,0,7,FinSaaS,S3,Test file
backend/tests/unit/services/verticalAccess.test.js,test,C,pool.query,12,0,12,Core,S3,Test file
